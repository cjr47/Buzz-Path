{"ast":null,"code":"var _jsxFileName = \"/Users/micahberman/Documents/momentum/buzzpath/src/components/map.js\",\n    _s = $RefreshSig$();\n\nimport { useLoadScript, GoogleMap, Autocomplete, DirectionsRenderer, Marker } from \"@react-google-maps/api\";\nimport React, { useState, useRef } from 'react';\nimport \"./maps.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst center = {\n  lat: 35.9940,\n  lng: -78.8986\n};\nconst libraries = [\"places\"];\nconst mapContainerStyle = {\n  width: \"100%\",\n  height: \"100%\",\n  overflow: \"visible\",\n  resetBoundsOnResize: \"true\"\n};\nexport default function Gmap(_ref) {\n  _s();\n\n  let {\n    rangeValue\n  } = _ref;\n  const [map, setMap] = useState(null);\n  const [directionsResponse, setDirectionsResponse] = useState(null);\n  const [distance, setDistance] = useState(\"\");\n  const [duration, setDuration] = useState(\"\");\n  const originRef = useRef();\n  const destinationRef = useRef();\n  const {\n    isLoaded,\n    loaderror\n  } = useLoadScript({\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n    libraries\n  });\n  if (loaderror) return \"Where's my Coffee!! - be\";\n  if (!isLoaded) return \"Finding your coffee\";\n  const distCoffee = distance.slice(0, -2);\n  const intCoffee = Number(distCoffee);\n  console.log(rangeValue);\n  /* async function coffeeStops({rangeValue}) { */\n\n  const coffeeDistance = intCoffee / rangeValue;\n  /*   await calculatePath;\n    if (distance > 0) {\n      console.log(coffeeDistance)\n      return coffeeDistance;\n      console.log({distance}); */\n\n  /* Micah's Code */\n\n  const directions = {};\n  const stops = 2;\n  const route = setDirectionsResponse(results);\n  route.rendering.routeId = `thisRoute`; // Set the stops for the route to the first value (default)\n\n  route.rendering.stops = stops; // When this select element is changed, update the route renderer.stops to the new value\n\n  onload = function () {\n    // update the route renderer.stops to the new value\n    directions[this.name].renderer.stops = this.value; // Draw the new markers for the route that just had it's stops changed\n\n    setMarkers(this.name);\n  };\n\n  requestRoute(route, map);\n}\n\n_s(Gmap, \"FqN0uWkpgi9vCILvTx3USBdz/XM=\", false, function () {\n  return [useLoadScript];\n});\n\n_c = Gmap;\n; // Set markers for the route with ID\n\nconst setMarkers = ID => {\n  // Get info about the route\n  const direction = directions[ID],\n        renderer = direction.renderer,\n        stop = renderer.stops,\n        marker = renderer.marker,\n        map = renderer.getMap(),\n        dirs = direction.renderer.getDirections();\n  marker.map = map; // For each set, which is an object where key: number of stops and value: list of markers\n\n  for (const k in direction.sets) {\n    const set = directions[ID].sets[k]; // Only show the set of markers that match the currently selected number of stops\n\n    set.visible = !!(k === stop); // For each marker in the set\n\n    set.forEach(marker => {\n      // If this is the visible set, set the marker map to the map otherwise null\n      marker.setMap(set.visible ? map : null);\n    });\n  }\n\n  ; // If a set of markers has not been calculated for this number of stops yet\n\n  if (!direction.sets[stop]) {\n    if (dirs.routes.length) {\n      const route = dirs.routes[0];\n      let distanceBetweenStops = 0; // For each leg in the route\n\n      route.legs.forEach(leg => {\n        if (leg.distance) {\n          // Set the distance between stops to (total leg distance) / (number of stops + 1)\n          distanceBetweenStops = leg.distance.value / (parseInt(stop) + 1);\n        }\n      }); // Get the list of markers for this milestone\n\n      direction.sets[stop] = getMarkers(route, distanceBetweenStops, marker);\n    }\n  }\n}; // Remove old markers and render updated map with markers\n\n\nconst requestRoute = (route, map) => {\n  if (!window.gDirSVC) window.gDirSVC = new google.maps.DirectionsService();\n  var renderer = new google.maps.DirectionsRenderer(route.rendering);\n  var renderer = new google.maps.DirectionsRenderer(route.rendering);\n  renderer.setMap(map);\n  renderer.setOptions({\n    preserveViewport: true\n  });\n  google.maps.event.addListener(renderer, 'directions_changed', function () {\n    if (directions[this.routeId]) {\n      //remove markers\n      for (var k in directions[this.routeId].sets) {\n        for (var m = 0; m < directions[this.routeId].sets[k].length; ++m) {\n          directions[this.routeId].sets[k][m].setMap(null);\n        }\n      }\n    }\n\n    directions[this.routeId] = {\n      renderer: this,\n      sets: {}\n    };\n    setMarkers(this.routeId);\n  });\n  window.gDirSVC.route(route.request, function (response, status) {\n    if (status == google.maps.DirectionsStatus.OK) {\n      renderer.setDirections(response);\n    }\n  });\n  /*Micah's Code*/\n\n  async function calculatePath() {\n    if (originRef.current.value === '' || destinationRef.current.value === '') {\n      return;\n    } // eslint-disable-next-line no-undef\n\n\n    const directionsService = new google.maps.DirectionsService();\n    const results = await directionsService.route({\n      origin: originRef.current.value,\n      destination: destinationRef.current.value,\n      // eslint-disable-next-line no-undef\n      travelMode: google.maps.TravelMode.DRIVING\n    });\n    setDirectionsResponse(results);\n    setDistance(results.routes[0].legs[0].distance.text);\n    setDuration(results.routes[0].legs[0].duration.text);\n    /* console.log(coffeeDistance) */\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Origin\",\n          ref: originRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Destination\",\n          ref: destinationRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: calculatePath,\n        children: \"Find your Buzzed Path\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Distance: \", distance]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Duration: \", duration]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Miles per Coffee: \", coffeeDistance]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"coffeemap\",\n      children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerStyle: mapContainerStyle,\n        zoom: 8,\n        center: center,\n        children: [/*#__PURE__*/_jsxDEV(Marker, {\n          position: center\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 8\n        }, this), directionsResponse && /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n          directions: directionsResponse\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 3\n  }, this);\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Gmap\");","map":{"version":3,"sources":["/Users/micahberman/Documents/momentum/buzzpath/src/components/map.js"],"names":["useLoadScript","GoogleMap","Autocomplete","DirectionsRenderer","Marker","React","useState","useRef","center","lat","lng","libraries","mapContainerStyle","width","height","overflow","resetBoundsOnResize","Gmap","rangeValue","map","setMap","directionsResponse","setDirectionsResponse","distance","setDistance","duration","setDuration","originRef","destinationRef","isLoaded","loaderror","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","distCoffee","slice","intCoffee","Number","console","log","coffeeDistance","directions","stops","route","results","rendering","routeId","onload","name","renderer","value","setMarkers","requestRoute","ID","direction","stop","marker","getMap","dirs","getDirections","k","sets","set","visible","forEach","routes","length","distanceBetweenStops","legs","leg","parseInt","getMarkers","window","gDirSVC","google","maps","DirectionsService","setOptions","preserveViewport","event","addListener","m","request","response","status","DirectionsStatus","OK","setDirections","calculatePath","current","directionsService","origin","destination","travelMode","TravelMode","DRIVING","text"],"mappings":"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","sourcesContent":["import {\n  useLoadScript,\n  GoogleMap,\n  Autocomplete,\n  DirectionsRenderer,\n  Marker,\n} from \"@react-google-maps/api\";\nimport React, { useState, useRef } from 'react'\nimport \"./maps.css\"\n\n \n\n\n\nconst center = {lat: 35.9940,lng: -78.8986}\nconst libraries = [\"places\"]\nconst mapContainerStyle = {\n    width: \"100%\",\n    height: \"100%\",\n    overflow: \"visible\",\n    resetBoundsOnResize: \"true\",\n}\n\n\nexport default function Gmap ({rangeValue}) {\n    \n                const [map, setMap] = useState(null);\n                const [directionsResponse, setDirectionsResponse] =\n                  useState(null);\n                const [distance, setDistance] = useState(\"\");\n                const [duration, setDuration] = useState(\"\");\n                \n                \n                const originRef = useRef();\n                const destinationRef = useRef();\n    const { isLoaded, loaderror } = useLoadScript({\n          googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n          libraries,\n        });\n    if (loaderror) return \"Where's my Coffee!! - be\";\n    if(!isLoaded) return \"Finding your coffee\";\n\n\n    const distCoffee = (distance.slice(0,-2))\n    const intCoffee = Number(distCoffee)\n       console.log(rangeValue)     \n\n   \n   \n /* async function coffeeStops({rangeValue}) { */\n           const coffeeDistance = intCoffee /(rangeValue); \n\n        /*   await calculatePath;\n          if (distance > 0) {\n            console.log(coffeeDistance)\n            return coffeeDistance;\n            console.log({distance}); */\n\n\n/* Micah's Code */\n            const directions = {};     \n      const stops = 2;\n      const route = setDirectionsResponse(results)  \n\n      route.rendering.routeId = `thisRoute`;\n      // Set the stops for the route to the first value (default)\n      route.rendering.stops = stops;\n      // When this select element is changed, update the route renderer.stops to the new value\n      onload = function() {\n        // update the route renderer.stops to the new value\n        directions[this.name].renderer.stops = this.value;\n        // Draw the new markers for the route that just had it's stops changed\n        setMarkers(this.name)\n      };         \n      requestRoute(route,map);\n    };\n  \n  \n  // Set markers for the route with ID\n  const setMarkers = (ID) => {\n    // Get info about the route\n    const direction = directions[ID],\n        renderer = direction.renderer,\n        stop = renderer.stops,\n        marker = renderer.marker,\n        map = renderer.getMap(),\n        dirs = direction.renderer.getDirections();\n        marker.map = map;\n\n    // For each set, which is an object where key: number of stops and value: list of markers\n    for (const k in direction.sets) {\n      const set = directions[ID].sets[k];\n      // Only show the set of markers that match the currently selected number of stops\n      set.visible = !!(k === stop);\n      \n      // For each marker in the set\n      set.forEach(marker => {\n        // If this is the visible set, set the marker map to the map otherwise null\n        marker.setMap(set.visible ? map : null);\n      });\n    };\n\n    // If a set of markers has not been calculated for this number of stops yet\n    if(!direction.sets[stop]) {\n      if(dirs.routes.length) {\n        const route = dirs.routes[0];\n        let distanceBetweenStops = 0;\n\n        // For each leg in the route\n        route.legs.forEach(leg => {\n          if(leg.distance) {\n            // Set the distance between stops to (total leg distance) / (number of stops + 1)\n            distanceBetweenStops = leg.distance.value / (parseInt(stop) + 1);\n          }\n          \n        });\n        \n        // Get the list of markers for this milestone\n        direction.sets[stop]= getMarkers(route, distanceBetweenStops, marker);\n      }\n    }\n  }\n  \n  // Remove old markers and render updated map with markers\n   const requestRoute = (route,map) => {\n    if(!window.gDirSVC) window.gDirSVC = new google.maps.DirectionsService();\n        \n    var renderer=new google.maps.DirectionsRenderer(route.rendering);\n     var renderer=new google.maps.DirectionsRenderer(route.rendering);\n        renderer.setMap(map);\n        renderer.setOptions({preserveViewport:true})\n        \n    \n    google.maps.event.addListener(renderer, 'directions_changed', function() {\n          \n          if(directions[this.routeId])\n          {\n           //remove markers\n            for(var k in directions[this.routeId].sets)\n            {              \n                for(var m=0;m<directions[this.routeId].sets[k].length;++m)\n                {\n                  directions[this.routeId].sets[k][m].setMap(null);\n                }\n            }\n          }\n\n          directions[this.routeId]={renderer:this,sets:{}};\n          setMarkers(this.routeId);\n          \n    });\n\n     window.gDirSVC.route(route.request, function(response, status) {\n      if (status == google.maps.DirectionsStatus.OK) {\n        renderer.setDirections(response);\n    }\n    });\n   \n \n      \n/*Micah's Code*/ \n          \n    async function calculatePath(){\n       \n        if (originRef.current.value === '' || destinationRef.current.value === ''){\n            return\n        }\n        \n        // eslint-disable-next-line no-undef\n        const directionsService = new google.maps.DirectionsService()\n        const results = await directionsService.route({\n          origin: originRef.current.value,\n          destination: destinationRef.current.value,\n          // eslint-disable-next-line no-undef\n          travelMode: google.maps.TravelMode.DRIVING,\n        \n        });\n            \n        setDirectionsResponse(results)\n        setDistance(results.routes[0].legs[0].distance.text)\n        setDuration(results.routes[0].legs[0].duration.text)\n        \n        /* console.log(coffeeDistance) */\n        \n        \n\n    }\n\n\n\nreturn (\n  <div>\n    <div>\n      <Autocomplete>\n        <input type=\"text\" placeholder=\"Origin\" ref={originRef} />\n      </Autocomplete>\n    </div>\n    <div>\n      <Autocomplete>\n        <input type=\"text\" placeholder=\"Destination\" ref={destinationRef} />\n      </Autocomplete>\n    </div>\n    \n    <div>\n        <button type='submit' onClick={calculatePath}>Find your Buzzed Path</button>\n    </div>\n    <div>\n        <p>Distance: {distance}</p>\n        \n        <p>Duration: {duration}</p>\n        <p>Miles per Coffee: {coffeeDistance}</p>\n{/*         <p>Miles per Coffee: {intCoffee/rangeValue}</p>\n */}        \n    </div>\n    <div className=\"coffeemap\">\n      <GoogleMap\n        mapContainerStyle={mapContainerStyle}\n        zoom={8}\n        center={center}\n      ><Marker position={center}/>\n        {directionsResponse && (\n            <DirectionsRenderer directions = {directionsResponse}/>\n        )}</GoogleMap>\n    </div>\n  </div>\n);\n}\n"]},"metadata":{},"sourceType":"module"}